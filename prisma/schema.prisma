// Prisma schema file
// Run `npx prisma generate` and `npx prisma migrate dev` after editing

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql" // Change to your DB provider if needed
  url      = env("DATABASE_URL")
}

enum CommentModeration {
  AUTO_HIDE
  AUTO_DELETE
  MANUAL_REVIEW
}

model User {
  id                String             @id
  username          String
  access_token      String
  settings          CommentModeration?
  analyzedComments  AnalyzedComment[]
}

model AnalyzedComment {
  id          String   @id @default(uuid())
  userId      String
  user        User     @relation(fields: [userId], references: [id])
  commentId   String   // Instagram comment ID
  mediaId     String?  // Parent media ID
  text        String
  username    String
  isHarmful   Boolean
  isHidden    Boolean  @default(false)  // Track if comment is hidden
  timestamp   DateTime @default(now())
  
  @@unique([userId, commentId])
} 